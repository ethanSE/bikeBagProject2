(this["webpackJsonpcanvas-test"]=this["webpackJsonpcanvas-test"]||[]).push([[0],{126:function(e,t,n){e.exports={customSpec:"CustomSpec_customSpec__3zSeu"}},131:function(e,t,n){e.exports=n(541)},19:function(e,t,n){e.exports={home:"Home_home__2Zh7y",iconDescContainer:"Home_iconDescContainer__lwb9z",row:"Home_row__3uUUw",bigScreenReverseRow:"Home_bigScreenReverseRow__2LpWW",icon:"Home_icon__1RNnw",text:"Home_text__yLEED"}},27:function(e,t,n){e.exports={bagIcon:"StyleSelection_bagIcon__gjqEV",styleContainer:"StyleSelection_styleContainer__2rKvy",styleItem:"StyleSelection_styleItem__HH9RA",styleItemActive:"StyleSelection_styleItemActive__3VPpx"}},38:function(e,t,n){e.exports={imageUpload:"ImageUpload_imageUpload__2kyVe",button:"ImageUpload_button__2ZvqF",fileInput:"ImageUpload_fileInput__32kdw",hidden:"ImageUpload_hidden__3cEGb",minimized:"ImageUpload_minimized__1kd-9"}},39:function(e,t,n){e.exports={scaleInputForm:"ScaleInput_scaleInputForm__3GYfS",scaleInput:"ScaleInput_scaleInput__3lksu",button:"ScaleInput_button__26wym",minimized:"ScaleInput_minimized__1IaZN"}},40:function(e,t,n){e.exports={shapeInput:"ShapeInput_shapeInput__34sbM",buttonRow:"ShapeInput_buttonRow__1DTqS",button:"ShapeInput_button__vHN-I"}},45:function(e,t,n){e.exports={header:"Header_header__3diqq",headerContent:"Header_headerContent__1skw-",headerTitle:"Header_headerTitle__2ZMQM",links:"Header_links__KrrUu"}},539:function(e,t,n){},541:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),i=n(112),r=n.n(i),o=n(11),l=n(22),u=Object(a.createContext)("home"),s=n(45),m=n.n(s),d=n(33),h={aws_project_region:"us-west-2",aws_cognito_identity_pool_id:"us-west-2:d18c05cc-ae5c-4b7a-9e72-16ac49d23888",aws_cognito_region:"us-west-2",aws_user_pools_id:"us-west-2_hIcaYQhye",aws_user_pools_web_client_id:"4emsfur38nbennha4cqquo0l52",oauth:{domain:"bike-bag-project2-new-env.auth.us-west-2.amazoncognito.com",scope:["phone","email","openid","profile","aws.cognito.signin.user.admin"],redirectSignIn:"http://localhost:3000/",redirectSignOut:"http://localhost:3000/",responseType:"code"},federationTarget:"COGNITO_USER_POOLS"};function f(){var e=Object(a.useContext)(u).setActiveMainComponent;return c.a.createElement("div",{className:m.a.header},c.a.createElement("div",{className:m.a.headerContent},c.a.createElement("h1",{className:m.a.headerTitle},"Bike Frame Bag Designer"),c.a.createElement("div",{className:m.a.links},c.a.createElement(p,null),c.a.createElement("h3",{onClick:function(){return e("customSpec")}}," Custom "),c.a.createElement("h3",{onClick:function(){return e("home")}}," Home "))))}d.c.configure(h);var p=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){d.b.listen("auth",(function(e){var t=e.payload,n=t.event;t.data;"signOut"===n?i(null):"signIn"===n&&i(d.a.currentAuthenticatedUser())}))})),n?c.a.createElement("h3",{onClick:function(){return d.a.signOut()}}," Sign Out "):c.a.createElement("h3",{onClick:function(){return d.a.federatedSignIn()}}," Sign In ")},b=n(19),g=n.n(b),E=n(120),v=n.n(E),_=n(122),S=n.n(_),w=n(123),I=n.n(w),j=n(124),O=n.n(j),k=function(){var e=Object(a.useContext)(u).setActiveMainComponent;return c.a.createElement("div",{className:g.a.home},c.a.createElement("h1",null,"How it works"),c.a.createElement("div",{className:g.a.iconDescContainer},c.a.createElement("div",{className:g.a.bigScreenReverseRow},c.a.createElement("div",{className:g.a.icon},c.a.createElement(v.a,{fontSize:"inherit",color:"inherit"})),c.a.createElement("div",{className:g.a.text},c.a.createElement("p",null,"1. Upload an image of your bike"))),c.a.createElement("div",{className:g.a.row},c.a.createElement("div",{className:g.a.icon},c.a.createElement(S.a,{fontSize:"inherit",color:"inherit"})),c.a.createElement("div",{className:g.a.text},c.a.createElement("p",null,"2. Measure your bike to establish the scale"))),c.a.createElement("div",{className:g.a.bigScreenReverseRow},c.a.createElement("div",{className:g.a.icon},c.a.createElement(I.a,{fontSize:"inherit",color:"inherit"})),c.a.createElement("div",{className:g.a.text},c.a.createElement("p",null,"3. Outline your desired shape"))),c.a.createElement("div",{className:g.a.row},c.a.createElement("div",{className:g.a.icon},c.a.createElement(O.a,{fontSize:"inherit",color:"inherit"})),c.a.createElement("div",{className:g.a.text},c.a.createElement("p",null,"4. Submit your design and receive your custom bike frame bag")))),c.a.createElement("button",{className:"button",onClick:function(){return e("customSpec")}}," create custom bag"))};var y=function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(),i=Object(a.useRef)(),r=c.a.useState("signIn"),l=Object(o.a)(r,2),u=l[0],s=l[1],m="signIn"===u?c.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),console.log(),n.value="",t.value=""}(e)},className:"signInForm"},c.a.createElement("input",{ref:function(e){t=e},placeholder:"Email",type:"text"}),c.a.createElement("input",{ref:function(e){n=e},placeholder:"password",type:"password"}),c.a.createElement("button",{className:"button accountButton",type:"submit"},"Sign In"),c.a.createElement("button",{className:"button accountButton",onClick:function(){return s("createAccount")}},"Create Accout")):c.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),n.value===i.value?console.log():console.log("no")}(e)},className:"accountInputForm"},c.a.createElement("input",{ref:function(e){t=e},placeholder:"Email",type:"text"}),c.a.createElement("input",{ref:function(e){n=e},placeholder:"password",type:"password"}),c.a.createElement("input",{ref:function(e){i=e},placeholder:"re-enter password",type:"password"}),c.a.createElement("button",{className:"button accountButton",type:"submit"},"Create Account"),c.a.createElement("button",{className:"button accountButton",onClick:function(){return s("signIn")}},"Already have an account? -  Sign In"));return"account"===e.activeMainComponent&&e.user||e.user||"account"!==e.activeMainComponent&&"active"!==e.customSpecUI.signIn?null:c.a.createElement("div",{className:"account"},m)},C=function(e){return c.a.createElement("svg",Object.assign({width:644.091,height:341.511},e,{viewBox:"0 0 644 342"}),c.a.createElement("path",{d:"M207.937 66.749l305.069-59.25 15.127 52.947L274.75 333.999z",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("rect",{width:52.764,height:118.582,x:369.241,y:-221.188,transform:"matrix(.6959 .71813 -.67781 .73523 0 0)",ry:22.455,opacity:.97,fill:"#0000b2"}),c.a.createElement("rect",{width:52.764,height:118.582,x:194.913,y:207.595,transform:"matrix(.98364 -.18014 .23523 .97194 0 0)",ry:18.571,opacity:.97,fill:"#0000b2"}),c.a.createElement("path",{d:"M207.937 66.749L10.021 264.665 7.5 303.744l267.25 30.255M528.133 60.446L636.546 297.44",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M216.762 72.737l15.127 58.618 247.08-27.733L520.254 59.5 508.28 15.38z",fill:"#92ba40"}))},N=function(e){return c.a.createElement("svg",Object.assign({width:644.091,height:341.511},e,{viewBox:"0 0 644 342"}),c.a.createElement("path",{d:"M207.937 66.749l305.069-59.25 15.127 52.947L274.75 333.999z",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M207.937 66.749L10.021 264.665 7.5 303.744l267.25 30.255M528.133 60.446L636.546 297.44",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M216.577 72.183l48.308 193.333h63.381L520.7 60.837l-12.644-44.79z",fill:"#92ba40"}))},x=function(e){return c.a.createElement("svg",Object.assign({width:644.091,height:341.511},e,{viewBox:"0 0 644 342"}),c.a.createElement("path",{d:"M207.937 66.749l305.069-59.25 15.127 52.947L274.75 333.999z",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("rect",{width:52.764,height:118.582,x:194.913,y:207.595,transform:"matrix(.98364 -.18014 .23523 .97194 0 0)",ry:18.571,opacity:.97,fill:"#0000b2"}),c.a.createElement("path",{d:"M207.937 66.749L10.021 264.665 7.5 303.744l267.25 30.255M528.133 60.446L636.546 297.44",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M269.523 62.098l51.275 211.962L479.415 104.96 520.7 60.837l-12.644-44.79z",fill:"#92ba40"}))},z=Object(a.createContext)(null),L=n(27),R=n.n(L),M=function(){var e=Object(a.useContext)(z),t=e.customSpecState,n=e.setCustomSpecState,i=e.dispatch,r=function(e){n(Object(l.a)({},t,{style:e})),i("image")};return c.a.createElement("div",{className:R.a.styleContainer},c.a.createElement("div",{className:"topTube"===t.style?R.a.styleItemActive:R.a.styleItem,onClick:function(){return r("topTube")}},c.a.createElement("h4",null,"Top Tube"),c.a.createElement(C,{className:R.a.bagIcon})),c.a.createElement("div",{className:"front"===t.style?R.a.styleItemActive:R.a.styleItem,onClick:function(){return r("front")}},c.a.createElement("h4",null,"Front"),c.a.createElement(x,{className:R.a.bagIcon})),c.a.createElement("div",{className:"full"===t.style?R.a.styleItemActive:R.a.styleItem,onClick:function(){return r("full")}},c.a.createElement("h4",null,"Full"),c.a.createElement(N,{className:R.a.bagIcon})))},U=n(38),W=n.n(U),H=function(){var e=Object(a.useContext)(z),t=e.customSpecUIState,n=e.setCustomSpecState,i=e.customSpecState,r=e.dispatch,o=Object(a.useRef)(),u=Object(a.useRef)(),s=new Image,m=function(){var e=u.current.getContext("2d");u.current.width=s.width,u.current.height=s.height,e.drawImage(s,0,0);var t=u.current.toDataURL("image/png");n(Object(l.a)({},i,{image:t})),r("scale")},d=function(){console.error("The provided file couldn't be loaded as an Image media")};switch(t.image){case"active":return c.a.createElement("div",{className:W.a.imageUpload},c.a.createElement("h3",null,"Image Upload"),c.a.createElement("label",{className:W.a.button,htmlFor:"file"},c.a.createElement("p",null,"Upload Photo")),c.a.createElement("input",{className:W.a.fileInput,type:"file",name:"file",id:"file",ref:o,onChange:function(){s.onload=m,s.onerror=d,s.src=URL.createObjectURL(o.current.files[0])}}),c.a.createElement("canvas",{className:W.a.hidden,ref:u,width:"",height:""}));case"minimized":return c.a.createElement("div",{className:W.a.minimized,onClick:function(){return r("image")}},c.a.createElement("h3",null,"Image Upload"));default:return null}};function T(e,t){var n,a=arguments,c=this;return function(){clearTimeout(n),n=setTimeout((function(){n=null,e.apply(c,a)}),t)}}var F=n(39),A=n.n(F);function B(){var e=Object(a.useContext)(z),t=e.customSpecUIState,n=e.dispatch;switch(t.scale){case"active":return c.a.createElement(D,null);case"minimized":return c.a.createElement("div",{className:A.a.minimized,onClick:function(){return n("scale")}},c.a.createElement("h3",null,"Scale"));default:return null}}var D=function(){var e,t=Object(a.useState)(window.innerWidth),n=Object(o.a)(t,2),i=n[0],r=n[1],u=Object(a.useState)([]),s=Object(o.a)(u,2),m=s[0],d=s[1],h=Object(a.useState)(null),f=Object(o.a)(h,2),p=f[0],b=f[1],g=Object(a.useContext)(z),E=g.setCustomSpecState,v=g.customSpecState,_=g.dispatch,S=Object(a.useRef)(),w=Object(a.useRef)(),I=Object(a.useRef)(),j=T((function(){return r(window.innerWidth)}),50);Object(a.useEffect)((function(){return window.addEventListener("resize",j),function(){window.removeEventListener("resize",j)}}),[]);Object(a.useEffect)((function(){!function(){var t=new Image;t.onload=function(){p||b({imageHeight:t.height,imageWidth:t.width});var n=I.current.clientWidth/t.width;S.current.width=t.width*n,S.current.height=t.height*n,(e=S.current.getContext("2d")).drawImage(t,0,0,S.current.width,S.current.height),O()},t.src=v.image}()}),[i,m]);var O=function(){m.forEach((function(e){k(e[0]*(S.current.width/p.imageWidth),e[1]*(S.current.height/p.imageHeight))}))},k=function(t,n){(e=S.current.getContext("2d")).strokeStyle="#FF0000",e.lineWidth=3,e.beginPath(),e.arc(t,n,10,0,2*Math.PI),e.stroke()};return c.a.createElement("div",{className:A.a.scaleInput,ref:I},c.a.createElement("h3",null,"Scale"),c.a.createElement("form",{onSubmit:function(e){return function(e){if(e.preventDefault(),2===m.length){var t=Math.hypot(m[0][0]-m[1][0],m[0][1]-m[1][1])/w.value;E(Object(l.a)({},v,{scale:t})),_("shape")}}(e)},className:A.a.scaleInputForm},c.a.createElement("input",{ref:function(e){w=e},placeholder:"Top Tube Length in inches",type:"number"}),c.a.createElement("button",{className:A.a.button,type:"submit"},"Submit"),c.a.createElement("button",{className:A.a.button,onClick:function(){return d([])}},"Reset")),c.a.createElement("canvas",{ref:S,width:"0",height:"0",onClick:function(e){var t=I.current.clientWidth/p.imageWidth;if(m.length<2){var n=S.current.getBoundingClientRect(),a=(e.clientX-n.left)/t,c=(e.clientY-n.top)/t;1===m.length?d([m[0],[a,c]]):d([[a,c]])}}}))},P=n(26),q=n(40),Y=n.n(q),Z=function(){var e=Object(a.useContext)(z),t=e.customSpecUIState,n=e.dispatch;switch(t.shape){case"active":return c.a.createElement(G,null);case"minimized":return c.a.createElement("div",{className:Y.a.shapeInput,onClick:function(){return n("shape")}},c.a.createElement("h3",null,"Shape"));default:return null}},G=function(){var e,t=Object(a.useContext)(z),n=t.customSpecState,i=t.setCustomSpecState,r=t.dispatch,u=Object(a.useState)([]),s=Object(o.a)(u,2),m=s[0],d=s[1],h=Object(a.useState)(null),f=Object(o.a)(h,2),p=f[0],b=f[1],g=Object(a.useState)(),E=Object(o.a)(g,2),v=E[0],_=E[1],S=Object(a.useRef)(),w=Object(a.useRef)();Object(a.useEffect)((function(){return window.addEventListener("resize",I),function(){window.removeEventListener("resize",I)}}),[]);var I=T((function(){return _(window.innerWidth)}),50);Object(a.useEffect)((function(){j()}),[v,m]);var j=function(){var t=new Image;t.onload=function(){p||b({imageHeight:t.height,imageWidth:t.width}),S.current.width=w.current.clientWidth,e=S.current.width/t.width,S.current.height=e*t.height,S.current.getContext("2d").drawImage(t,0,0,S.current.width,S.current.height),O(),y()},t.src=n.image},O=function(){m.forEach((function(t){k(t[0]*e,t[1]*e)}))},k=function(e,t){var n=S.current.getContext("2d");n.strokeStyle="#FF0000",n.lineWidth=3,n.beginPath(),n.arc(e,t,10,0,2*Math.PI),n.stroke()},y=function(){for(var t=0;t<m.length-1;t++){var n=S.current.getContext("2d");n.strokeStyle="#FF0000",n.lineWidth=3,n.moveTo(m[t][0]*e,m[t][1]*e),n.lineTo(m[t+1][0]*e,m[t+1][1]*e),n.stroke()}};return c.a.createElement("div",{className:Y.a.shapeInput,ref:w},c.a.createElement("h3",null,"Shape"),c.a.createElement("div",{className:Y.a.buttonRow},c.a.createElement("button",{className:Y.a.button,onClick:function(){i(Object(l.a)({},n,{shape:m})),r("confirmation")}},"Submit Shape"),c.a.createElement("button",{className:Y.a.button,onClick:function(){d([])}},"Reset Shape")),c.a.createElement("canvas",{ref:S,width:"0",height:"0",onClick:function(t){for(var n=S.current.getBoundingClientRect(),a=t.clientX-n.left,c=t.clientY-n.top,i=a*p.imageWidth/S.current.width,r=c*p.imageHeight/S.current.height,o=0;o<m.length;o++){if(Math.hypot(m[o][0]*e-i*e,m[o][1]*e-r*e)<10)return void d([].concat(Object(P.a)(m),[[m[o][0],m[o][1]]]))}d([].concat(Object(P.a)(m),[[i,r]]))}}))};n(125);var V=n(126),J=n.n(V),K=function(){return c.a.createElement("div",{className:J.a.customSpec},c.a.createElement(M,null),c.a.createElement(H,null),c.a.createElement(B,null),c.a.createElement(Z,null))},Q={image:null,scale:null,shape:null,download:null},X={style:"",image:null,scale:null,shape:null},$=function(e,t){switch(t){case"image":return Object(l.a)({},e,{image:"active",scale:null===e.scale?null:"minimized",shape:null===e.shape?null:"minimized",confirmation:null==e.confirmation?null:"minimized"});case"scale":return Object(l.a)({},e,{scale:"active",image:"minimized",shape:null==e.shape?null:"minimized",confirmation:null==e.confirmation?null:"minimized"});case"shape":return Object(l.a)({},e,{shape:"active",image:"minimized",scale:"minimized",confirmation:null==e.confirmation?null:"minimized"});case"confirmation":return Object(l.a)({},e,{shape:"minimized",scale:"minimized",image:"minimized"});default:throw new Error}},ee=function(){var e=Object(a.useState)("home"),t=Object(o.a)(e,2),n={activeMainComponent:t[0],setActiveMainComponent:t[1]},i=Object(a.useState)(X),r=Object(o.a)(i,2),l=r[0],s=r[1],m=Object(a.useReducer)($,Q),d=Object(o.a)(m,2),h=d[0],p=d[1],b={customSpecState:l,setCustomSpecState:s,customSpecUIState:h,dispatch:p};Object(a.useEffect)((function(){console.log(l)}),[l]);return c.a.createElement(u.Provider,{value:n},c.a.createElement(z.Provider,{value:b},c.a.createElement(f,null),function(){switch(n.activeMainComponent){case"home":return c.a.createElement(k,null);case"customSpec":return c.a.createElement(K,null);case"account":return c.a.createElement(y,null);default:console.log("default")}}()))};n(539);r.a.render(c.a.createElement(ee,null),document.getElementById("root"))},59:function(e,t){}},[[131,1,2]]]);
//# sourceMappingURL=main.3a184641.chunk.js.map