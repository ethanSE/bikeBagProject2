(this["webpackJsonpcanvas-test"]=this["webpackJsonpcanvas-test"]||[]).push([[0],{128:function(e,t,n){e.exports={customSpec:"CustomSpec_customSpec__3zSeu"}},133:function(e,t,n){e.exports=n(543)},20:function(e,t,n){e.exports={home:"Home_home__2Zh7y",iconDescContainer:"Home_iconDescContainer__lwb9z",row:"Home_row__3uUUw",bigScreenReverseRow:"Home_bigScreenReverseRow__2LpWW",icon:"Home_icon__1RNnw",text:"Home_text__yLEED"}},26:function(e,t,n){e.exports={bagIcon:"StyleSelection_bagIcon__gjqEV",styleContainer:"StyleSelection_styleContainer__2rKvy",styleItem:"StyleSelection_styleItem__HH9RA",styleItemActive:"StyleSelection_styleItemActive__3VPpx"}},37:function(e,t,n){e.exports={imageUpload:"ImageUpload_imageUpload__2kyVe",button:"ImageUpload_button__2ZvqF",fileInput:"ImageUpload_fileInput__32kdw",hidden:"ImageUpload_hidden__3cEGb",minimized:"ImageUpload_minimized__1kd-9"}},38:function(e,t,n){e.exports={scaleInputForm:"ScaleInput_scaleInputForm__3GYfS",scaleInput:"ScaleInput_scaleInput__3lksu",button:"ScaleInput_button__26wym",minimized:"ScaleInput_minimized__1IaZN"}},39:function(e,t,n){e.exports={shapeInput:"ShapeInput_shapeInput__34sbM",buttonRow:"ShapeInput_buttonRow__1DTqS",button:"ShapeInput_button__vHN-I"}},45:function(e,t,n){e.exports={header:"Header_header__3diqq",headerContent:"Header_headerContent__1skw-",headerTitle:"Header_headerTitle__2ZMQM",links:"Header_links__KrrUu"}},541:function(e,t,n){},543:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),i=n(114),r=n.n(i),l=n(16),o=n(10),u={image:null,scale:null,shape:null,download:null},s=function(e,t){switch(t){case"image":return Object(o.a)(Object(o.a)({},e),{},{image:"active",scale:null===e.scale?null:"minimized",shape:null===e.shape?null:"minimized",confirmation:null==e.confirmation?null:"minimized"});case"scale":return Object(o.a)(Object(o.a)({},e),{},{scale:"active",image:"minimized",shape:null==e.shape?null:"minimized",confirmation:null==e.confirmation?null:"minimized"});case"shape":return Object(o.a)(Object(o.a)({},e),{},{shape:"active",image:"minimized",scale:"minimized",confirmation:null==e.confirmation?null:"minimized"});case"confirmation":return Object(o.a)(Object(o.a)({},e),{},{shape:"minimized",scale:"minimized",image:"minimized"});default:throw new Error("invalid custom spec phase")}};var m=Object(a.createContext)("home"),h=Object(a.createContext)(null),d=n(55),p=n(45),f=n.n(p),b=n(32),g={aws_project_region:"us-west-2",aws_cognito_identity_pool_id:"us-west-2:d18c05cc-ae5c-4b7a-9e72-16ac49d23888",aws_cognito_region:"us-west-2",aws_user_pools_id:"us-west-2_hIcaYQhye",aws_user_pools_web_client_id:"4emsfur38nbennha4cqquo0l52",oauth:{domain:"bike-bag-project2-new-env.auth.us-west-2.amazoncognito.com",scope:["phone","email","openid","profile","aws.cognito.signin.user.admin"],redirectSignIn:"http://localhost:3000/",redirectSignOut:"http://localhost:3000/",responseType:"code"},federationTarget:"COGNITO_USER_POOLS"};function v(){var e=Object(a.useContext)(m).setActiveMainComponent;return c.a.createElement("div",{className:f.a.header},c.a.createElement("div",{className:f.a.headerContent},c.a.createElement("h1",{className:f.a.headerTitle},"Bike Frame Bag Designer"),c.a.createElement("div",{className:f.a.links},c.a.createElement(E,null),c.a.createElement("h3",{onClick:function(){return e("customSpec")}}," Custom "),c.a.createElement("h3",{onClick:function(){return e("home")}}," Home "))))}b.c.configure(g);var E=function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){b.b.listen("auth",(function(e){var t=e.payload,n=t.event;t.data;"signOut"===n?i(null):"signIn"===n&&i(b.a.currentAuthenticatedUser())}))})),n?c.a.createElement("h3",{onClick:function(){return b.a.signOut()}}," Sign Out "):c.a.createElement("h3",{onClick:function(){return b.a.federatedSignIn()}}," Sign In ")},_=n(20),S=n.n(_),w=n(122),j=n.n(w),O=n(124),C=n.n(O),I=n(125),k=n.n(I),y=n(126),N=n.n(y),x=function(){var e=Object(a.useContext)(m).setActiveMainComponent;return c.a.createElement("div",{className:S.a.home},c.a.createElement("h1",null,"How it works"),c.a.createElement("div",{className:S.a.iconDescContainer},c.a.createElement("div",{className:S.a.bigScreenReverseRow},c.a.createElement("div",{className:S.a.icon},c.a.createElement(j.a,{fontSize:"inherit",color:"inherit"})),c.a.createElement("div",{className:S.a.text},c.a.createElement("p",null,"1. Upload an image of your bike"))),c.a.createElement("div",{className:S.a.row},c.a.createElement("div",{className:S.a.icon},c.a.createElement(C.a,{fontSize:"inherit",color:"inherit"})),c.a.createElement("div",{className:S.a.text},c.a.createElement("p",null,"2. Measure your bike to establish the scale"))),c.a.createElement("div",{className:S.a.bigScreenReverseRow},c.a.createElement("div",{className:S.a.icon},c.a.createElement(k.a,{fontSize:"inherit",color:"inherit"})),c.a.createElement("div",{className:S.a.text},c.a.createElement("p",null,"3. Outline your desired shape"))),c.a.createElement("div",{className:S.a.row},c.a.createElement("div",{className:S.a.icon},c.a.createElement(N.a,{fontSize:"inherit",color:"inherit"})),c.a.createElement("div",{className:S.a.text},c.a.createElement("p",null,"4. Submit your design and receive your custom bike frame bag")))),c.a.createElement("button",{className:"button",onClick:function(){return e("customSpec")}}," create custom bag"))},z=function(e){return c.a.createElement("svg",Object.assign({width:644.091,height:341.511},e,{viewBox:"0 0 644 342"}),c.a.createElement("path",{d:"M207.937 66.749l305.069-59.25 15.127 52.947L274.75 333.999z",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("rect",{width:52.764,height:118.582,x:369.241,y:-221.188,transform:"matrix(.6959 .71813 -.67781 .73523 0 0)",ry:22.455,opacity:.97,fill:"#0000b2"}),c.a.createElement("rect",{width:52.764,height:118.582,x:194.913,y:207.595,transform:"matrix(.98364 -.18014 .23523 .97194 0 0)",ry:18.571,opacity:.97,fill:"#0000b2"}),c.a.createElement("path",{d:"M207.937 66.749L10.021 264.665 7.5 303.744l267.25 30.255M528.133 60.446L636.546 297.44",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M216.762 72.737l15.127 58.618 247.08-27.733L520.254 59.5 508.28 15.38z",fill:"#92ba40"}))},L=function(e){return c.a.createElement("svg",Object.assign({width:644.091,height:341.511},e,{viewBox:"0 0 644 342"}),c.a.createElement("path",{d:"M207.937 66.749l305.069-59.25 15.127 52.947L274.75 333.999z",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M207.937 66.749L10.021 264.665 7.5 303.744l267.25 30.255M528.133 60.446L636.546 297.44",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M216.577 72.183l48.308 193.333h63.381L520.7 60.837l-12.644-44.79z",fill:"#92ba40"}))},R=function(e){return c.a.createElement("svg",Object.assign({width:644.091,height:341.511},e,{viewBox:"0 0 644 342"}),c.a.createElement("path",{d:"M207.937 66.749l305.069-59.25 15.127 52.947L274.75 333.999z",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("rect",{width:52.764,height:118.582,x:194.913,y:207.595,transform:"matrix(.98364 -.18014 .23523 .97194 0 0)",ry:18.571,opacity:.97,fill:"#0000b2"}),c.a.createElement("path",{d:"M207.937 66.749L10.021 264.665 7.5 303.744l267.25 30.255M528.133 60.446L636.546 297.44",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M269.523 62.098l51.275 211.962L479.415 104.96 520.7 60.837l-12.644-44.79z",fill:"#92ba40"}))},M=n(26),U=n.n(M),W=function(){var e=Object(a.useContext)(h),t=e.customSpecState,n=e.setCustomSpecState,i=e.setActiveCustomSpecPhase,r=function(e){n(Object(o.a)(Object(o.a)({},t),{},{style:e})),i("image")};return c.a.createElement("div",{className:U.a.styleContainer},c.a.createElement("div",{className:"topTube"===t.style?U.a.styleItemActive:U.a.styleItem,onClick:function(){return r("topTube")}},c.a.createElement("h4",null,"Top Tube"),c.a.createElement(z,{className:U.a.bagIcon})),c.a.createElement("div",{className:"front"===t.style?U.a.styleItemActive:U.a.styleItem,onClick:function(){return r("front")}},c.a.createElement("h4",null,"Front"),c.a.createElement(R,{className:U.a.bagIcon})),c.a.createElement("div",{className:"full"===t.style?U.a.styleItemActive:U.a.styleItem,onClick:function(){return r("full")}},c.a.createElement("h4",null,"Full"),c.a.createElement(L,{className:U.a.bagIcon})))},H=n(37),T=n.n(H),A=function(){var e=Object(a.useContext)(h),t=e.customSpecUIState,n=e.setCustomSpecState,i=e.customSpecState,r=e.setActiveCustomSpecPhase,l=Object(a.useRef)(),u=Object(a.useRef)(),s=new Image,m=function(){var e=u.current.getContext("2d");u.current.width=s.width,u.current.height=s.height,e.drawImage(s,0,0);var t=u.current.toDataURL("image/png");n(Object(o.a)(Object(o.a)({},i),{},{image:t})),r("scale")},d=function(){console.error("The provided file couldn't be loaded as an Image media")};switch(t.image){case"active":return c.a.createElement("div",{className:T.a.imageUpload},c.a.createElement("h3",null,"Image Upload"),c.a.createElement("label",{className:T.a.button,htmlFor:"file"},c.a.createElement("p",null,"Upload Photo")),c.a.createElement("input",{className:T.a.fileInput,type:"file",name:"file",id:"file",ref:l,onChange:function(){s.onload=m,s.onerror=d,s.src=URL.createObjectURL(l.current.files[0])}}),c.a.createElement("canvas",{className:T.a.hidden,ref:u,width:"",height:""}));case"minimized":return c.a.createElement("div",{className:T.a.minimized,onClick:function(){return r("image")}},c.a.createElement("h3",null,"Image Upload"));default:return null}};function P(e,t){var n,a=arguments,c=this;return function(){clearTimeout(n),n=setTimeout((function(){n=null,e.apply(c,a)}),t)}}function F(e){var t=Object(a.useState)(window.innerWidth),n=Object(l.a)(t,2),c=n[0],i=n[1];return Object(a.useEffect)((function(){return window.addEventListener("resize",P((function(){return i(window.innerWidth)}),e)),function(){window.removeEventListener("resize",P((function(){return i(window.innerWidth)}),e))}}),[]),[c]}var B=n(38),D=n.n(B);function q(){var e=Object(a.useContext)(h),t=e.customSpecUIState,n=e.setActiveCustomSpecPhase;switch(t.scale){case"active":return c.a.createElement(Y,null);case"minimized":return c.a.createElement("div",{className:D.a.minimized,onClick:function(){return n("scale")}},c.a.createElement("h3",null,"Scale"));default:return null}}var Y=function(){var e,t=F(50),n=Object(l.a)(t,1)[0],i=Object(a.useState)([]),r=Object(l.a)(i,2),u=r[0],s=r[1],m=Object(a.useState)(null),d=Object(l.a)(m,2),p=d[0],f=d[1],b=Object(a.useContext)(h),g=b.setCustomSpecState,v=b.customSpecState,E=b.setActiveCustomSpecPhase,_=Object(a.useRef)(),S=Object(a.useRef)(),w=Object(a.useRef)();Object(a.useEffect)((function(){!function(){var t=new Image;t.onload=function(){p||f({imageHeight:t.height,imageWidth:t.width});var n=w.current.clientWidth/t.width;_.current.width=t.width*n,_.current.height=t.height*n,(e=_.current.getContext("2d")).drawImage(t,0,0,_.current.width,_.current.height),j()},t.src=v.image}()}),[n,u]);var j=function(){u.forEach((function(e){O(e[0]*(_.current.width/p.imageWidth),e[1]*(_.current.height/p.imageHeight))}))},O=function(t,n){(e=_.current.getContext("2d")).strokeStyle="#FF0000",e.lineWidth=3,e.beginPath(),e.arc(t,n,10,0,2*Math.PI),e.stroke()};return c.a.createElement("div",{className:D.a.scaleInput,ref:w},c.a.createElement("h3",null,"Scale"),c.a.createElement("form",{onSubmit:function(e){return function(e){if(e.preventDefault(),2===u.length){var t=Math.hypot(u[0][0]-u[1][0],u[0][1]-u[1][1])/S.value;g(Object(o.a)(Object(o.a)({},v),{},{scale:t})),E("shape")}}(e)},className:D.a.scaleInputForm},c.a.createElement("input",{ref:function(e){S=e},placeholder:"Top Tube Length in inches",type:"number"}),c.a.createElement("button",{className:D.a.button,type:"submit"},"Submit"),c.a.createElement("button",{className:D.a.button,onClick:function(){return s([])}},"Reset")),c.a.createElement("canvas",{ref:_,width:"0",height:"0",onClick:function(e){var t=w.current.clientWidth/p.imageWidth;if(u.length<2){var n=_.current.getBoundingClientRect(),a=(e.clientX-n.left)/t,c=(e.clientY-n.top)/t;1===u.length?s([u[0],[a,c]]):s([[a,c]])}}}))},Z=n(29),G=n(39),V=n.n(G),J=function(){var e=Object(a.useContext)(h),t=e.customSpecUIState,n=e.setActiveCustomSpecPhase;switch(t.shape){case"active":return c.a.createElement(K,null);case"minimized":return c.a.createElement("div",{className:V.a.shapeInput,onClick:function(){return n("shape")}},c.a.createElement("h3",null,"Shape"));default:return null}},K=function(){var e,t=F(50),n=Object(l.a)(t,1)[0],i=Object(a.useContext)(h),r=i.customSpecState,u=i.setCustomSpecState,s=i.setActiveCustomSpecPhase,m=Object(a.useState)([]),d=Object(l.a)(m,2),p=d[0],f=d[1],b=Object(a.useState)(null),g=Object(l.a)(b,2),v=g[0],E=g[1],_=Object(a.useRef)(),S=Object(a.useRef)();Object(a.useEffect)((function(){w()}),[n,p]);var w=function(){var t=new Image;t.onload=function(){v||E({imageHeight:t.height,imageWidth:t.width}),_.current.width=S.current.clientWidth,e=_.current.width/t.width,_.current.height=e*t.height,_.current.getContext("2d").drawImage(t,0,0,_.current.width,_.current.height),j(),C()},t.src=r.image},j=function(){p.forEach((function(t){O(t[0]*e,t[1]*e)}))},O=function(e,t){var n=_.current.getContext("2d");n.strokeStyle="#FF0000",n.lineWidth=3,n.beginPath(),n.arc(e,t,10,0,2*Math.PI),n.stroke()},C=function(){for(var t=0;t<p.length-1;t++){var n=_.current.getContext("2d");n.strokeStyle="#FF0000",n.lineWidth=3,n.moveTo(p[t][0]*e,p[t][1]*e),n.lineTo(p[t+1][0]*e,p[t+1][1]*e),n.stroke()}};return c.a.createElement("div",{className:V.a.shapeInput,ref:S},c.a.createElement("h3",null,"Shape"),c.a.createElement("div",{className:V.a.buttonRow},c.a.createElement("button",{className:V.a.button,onClick:function(){u(Object(o.a)(Object(o.a)({},r),{},{shape:p})),s("confirmation")}},"Submit Shape"),c.a.createElement("button",{className:V.a.button,onClick:function(){f([])}},"Reset Shape")),c.a.createElement("canvas",{ref:_,width:"0",height:"0",onClick:function(t){for(var n=_.current.getBoundingClientRect(),a=t.clientX-n.left,c=t.clientY-n.top,i=a*v.imageWidth/_.current.width,r=c*v.imageHeight/_.current.height,l=0;l<p.length;l++){if(Math.hypot(p[l][0]*e-i*e,p[l][1]*e-r*e)<10)return void f([].concat(Object(Z.a)(p),[[p[l][0],p[l][1]]]))}f([].concat(Object(Z.a)(p),[[i,r]]))}}))};n(127);var Q=n(128),X=n.n(Q),$=function(){return c.a.createElement("div",{className:X.a.customSpec},c.a.createElement(W,null),c.a.createElement(A,null),c.a.createElement(q,null),c.a.createElement(J,null))};function ee(){var e=Object(a.useState)("home"),t=Object(l.a)(e,2),n={activeMainComponent:t[0],setActiveMainComponent:t[1]},i=Object(a.useState)({style:"",image:null,scale:null,shape:null}),r=Object(l.a)(i,2),o=r[0],d=r[1],p=function(){var e=Object(a.useReducer)(s,u),t=Object(l.a)(e,2),n=t[0],c=t[1];return[n,function(e){c(e)}]}(),f=Object(l.a)(p,2),b={customSpecState:o,setCustomSpecState:d,customSpecUIState:f[0],setActiveCustomSpecPhase:f[1]};return c.a.createElement(m.Provider,{value:n},c.a.createElement(h.Provider,{value:b},c.a.createElement(v,null),c.a.createElement(te,{mode:n})))}var te=function(e){switch(e.mode.activeMainComponent){case"home":return c.a.createElement(x,null);case"customSpec":return c.a.createElement($,null);default:console.log("default")}};n(541);r.a.render(c.a.createElement(ee,null),document.getElementById("root"))},61:function(e,t){}},[[133,1,2]]]);
//# sourceMappingURL=main.1f775ecb.chunk.js.map