(this["webpackJsonpcanvas-test"]=this["webpackJsonpcanvas-test"]||[]).push([[0],{102:function(e,t,n){e.exports=n(501)},17:function(e,t,n){e.exports={bagIcon:"StyleSelection_bagIcon__gjqEV",styleContainer:"StyleSelection_styleContainer__2rKvy",styleItem:"StyleSelection_styleItem__HH9RA",styleItemActive:"StyleSelection_styleItemActive__3VPpx"}},26:function(e,t,n){e.exports={imageUpload:"ImageUpload_imageUpload__2kyVe",button:"ImageUpload_button__2ZvqF",fileInput:"ImageUpload_fileInput__32kdw",hidden:"ImageUpload_hidden__3cEGb",minimized:"ImageUpload_minimized__1kd-9"}},27:function(e,t,n){e.exports={scaleInputForm:"ScaleInput_scaleInputForm__3GYfS",scaleInput:"ScaleInput_scaleInput__3lksu",button:"ScaleInput_button__26wym",minimized:"ScaleInput_minimized__1IaZN"}},28:function(e,t,n){e.exports={shapeInput:"ShapeInput_shapeInput__34sbM",buttonRow:"ShapeInput_buttonRow__1DTqS",button:"ShapeInput_button__vHN-I"}},37:function(e,t,n){e.exports={header:"Header_header__3diqq",links:"Header_links__KrrUu"}},43:function(e,t){},500:function(e,t,n){},501:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),i=n(92),r=n.n(i),o=n(10),l=n(14),u=Object(a.createContext)("home"),s=n(37),m=n.n(s),d=n(21),h={aws_project_region:"us-west-2",aws_cognito_identity_pool_id:"us-west-2:d18c05cc-ae5c-4b7a-9e72-16ac49d23888",aws_cognito_region:"us-west-2",aws_user_pools_id:"us-west-2_hIcaYQhye",aws_user_pools_web_client_id:"4emsfur38nbennha4cqquo0l52",oauth:{domain:"bike-bag-project2-new-env.auth.us-west-2.amazoncognito.com",scope:["phone","email","openid","profile","aws.cognito.signin.user.admin"],redirectSignIn:"http://localhost:3000/",redirectSignOut:"http://localhost:3000/",responseType:"code"},federationTarget:"COGNITO_USER_POOLS"};d.c.configure(h);var p=function(){var e=Object(a.useContext)(u).setActiveMainComponent;return c.a.createElement("div",{className:m.a.header},c.a.createElement("h1",{style:m.a.headerTitle},"Bike Frame Bag Designer"),c.a.createElement("div",{className:m.a.links},c.a.createElement(f,null),c.a.createElement("h3",{onClick:function(){return e("customSpec")}}," Custom "),c.a.createElement("h3",{onClick:function(){return e("home")}}," Home ")))},f=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){d.b.listen("auth",(function(e){var t=e.payload,n=t.event;t.data;"signOut"===n?i(null):"signIn"===n&&i(d.a.currentAuthenticatedUser())}))})),n?(console.log("there mightbe a user"),c.a.createElement("h3",{onClick:function(){return d.a.signOut()}}," Sign Out ")):(console.log("there might not be a user"),c.a.createElement("h3",{onClick:function(){return d.a.federatedSignIn()}}," Sign In "))},g=function(){var e=Object(a.useContext)(u).setActiveMainComponent;return c.a.createElement("div",{className:"home"},c.a.createElement("h1",null,"How it works"),c.a.createElement("button",{className:"button",onClick:function(){return e("customSpec")}}," create custom bag"),c.a.createElement("div",{className:"image1"}),c.a.createElement("div",{className:"image2"}),c.a.createElement("div",{className:"image3"}),c.a.createElement("div",{className:"text text1"},c.a.createElement("h3",null,"Step 1"),c.a.createElement("p",null,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Reiciendis sequi optio asperiores sint aliquid in rem iure suscipit! Odit eum hic incidunt. Quidem corrupti expedita, officia doloremque praesentium maiores minima.")),c.a.createElement("div",{className:"text text2"},c.a.createElement("h3",null,"Step 2"),c.a.createElement("p",null,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Nobis cumque repellendus quidem? Facere, commodi unde beatae numquam, animi ratione consequuntur doloremque quia labore voluptates eius impedit officiis exercitationem doloribus sint?")),c.a.createElement("div",{className:"text text3"},c.a.createElement("h3",null,"Step 3"),c.a.createElement("p",null,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Nobis cumque repellendus quidem? Facere, commodi unde beatae numquam, animi ratione consequuntur doloremque quia labore voluptates eius impedit officiis exercitationem doloribus sint?")))};var b=function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(),i=Object(a.useRef)(),r=c.a.useState("signIn"),l=Object(o.a)(r,2),u=l[0],s=l[1],m="signIn"===u?c.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),console.log(),n.value="",t.value=""}(e)},className:"signInForm"},c.a.createElement("input",{ref:function(e){t=e},placeholder:"Email",type:"text"}),c.a.createElement("input",{ref:function(e){n=e},placeholder:"password",type:"password"}),c.a.createElement("button",{className:"button accountButton",type:"submit"},"Sign In"),c.a.createElement("button",{className:"button accountButton",onClick:function(){return s("createAccount")}},"Create Accout")):c.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),n.value===i.value?console.log():console.log("no")}(e)},className:"accountInputForm"},c.a.createElement("input",{ref:function(e){t=e},placeholder:"Email",type:"text"}),c.a.createElement("input",{ref:function(e){n=e},placeholder:"password",type:"password"}),c.a.createElement("input",{ref:function(e){i=e},placeholder:"re-enter password",type:"password"}),c.a.createElement("button",{className:"button accountButton",type:"submit"},"Create Account"),c.a.createElement("button",{className:"button accountButton",onClick:function(){return s("signIn")}},"Already have an account? -  Sign In"));return"account"===e.activeMainComponent&&e.user||e.user||"account"!==e.activeMainComponent&&"active"!==e.customSpecUI.signIn?null:c.a.createElement("div",{className:"account"},m)},E=function(e){return c.a.createElement("svg",Object.assign({width:644.091,height:341.511},e,{viewBox:"0 0 644 342"}),c.a.createElement("path",{d:"M207.937 66.749l305.069-59.25 15.127 52.947L274.75 333.999z",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("rect",{width:52.764,height:118.582,x:369.241,y:-221.188,transform:"matrix(.6959 .71813 -.67781 .73523 0 0)",ry:22.455,opacity:.97,fill:"#0000b2"}),c.a.createElement("rect",{width:52.764,height:118.582,x:194.913,y:207.595,transform:"matrix(.98364 -.18014 .23523 .97194 0 0)",ry:18.571,opacity:.97,fill:"#0000b2"}),c.a.createElement("path",{d:"M207.937 66.749L10.021 264.665 7.5 303.744l267.25 30.255M528.133 60.446L636.546 297.44",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M216.762 72.737l15.127 58.618 247.08-27.733L520.254 59.5 508.28 15.38z",fill:"#92ba40"}))},v=function(e){return c.a.createElement("svg",Object.assign({width:644.091,height:341.511},e,{viewBox:"0 0 644 342"}),c.a.createElement("path",{d:"M207.937 66.749l305.069-59.25 15.127 52.947L274.75 333.999z",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M207.937 66.749L10.021 264.665 7.5 303.744l267.25 30.255M528.133 60.446L636.546 297.44",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M216.577 72.183l48.308 193.333h63.381L520.7 60.837l-12.644-44.79z",fill:"#92ba40"}))},S=function(e){return c.a.createElement("svg",Object.assign({width:644.091,height:341.511},e,{viewBox:"0 0 644 342"}),c.a.createElement("path",{d:"M207.937 66.749l305.069-59.25 15.127 52.947L274.75 333.999z",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("rect",{width:52.764,height:118.582,x:194.913,y:207.595,transform:"matrix(.98364 -.18014 .23523 .97194 0 0)",ry:18.571,opacity:.97,fill:"#0000b2"}),c.a.createElement("path",{d:"M207.937 66.749L10.021 264.665 7.5 303.744l267.25 30.255M528.133 60.446L636.546 297.44",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M269.523 62.098l51.275 211.962L479.415 104.96 520.7 60.837l-12.644-44.79z",fill:"#92ba40"}))},w=Object(a.createContext)(null),_=n(17),I=n.n(_),j=function(){var e=Object(a.useContext)(w),t=e.customSpecState,n=e.setCustomSpecState,i=e.dispatch,r=function(e){n(Object(l.a)({},t,{style:e})),i("image")};return c.a.createElement("div",{className:I.a.styleContainer},c.a.createElement("div",{className:"topTube"===t.style?I.a.styleItemActive:I.a.styleItem,onClick:function(){return r("topTube")}},c.a.createElement("h4",null,"Top Tube"),c.a.createElement(E,{className:I.a.bagIcon})),c.a.createElement("div",{className:"front"===t.style?I.a.styleItemActive:I.a.styleItem,onClick:function(){return r("front")}},c.a.createElement("h4",null,"Front"),c.a.createElement(S,{className:I.a.bagIcon})),c.a.createElement("div",{className:"full"===t.style?I.a.styleItemActive:I.a.styleItem,onClick:function(){return r("full")}},c.a.createElement("h4",null,"Full"),c.a.createElement(v,{className:I.a.bagIcon})))},O=n(26),k=n.n(O),y=function(){var e=Object(a.useContext)(w),t=e.customSpecUIState,n=e.setCustomSpecState,i=e.customSpecState,r=e.dispatch,o=Object(a.useRef)(),u=Object(a.useRef)(),s=new Image,m=function(){var e=u.current.getContext("2d");u.current.width=s.width,u.current.height=s.height,e.drawImage(s,0,0);var t=u.current.toDataURL("image/png");n(Object(l.a)({},i,{image:t})),r("scale")},d=function(){console.error("The provided file couldn't be loaded as an Image media")};switch(t.image){case"active":return c.a.createElement("div",{className:k.a.imageUpload},c.a.createElement("h3",null,"Image Upload"),c.a.createElement("label",{className:k.a.button,htmlFor:"file"},c.a.createElement("p",null,"Upload Photo")),c.a.createElement("input",{className:k.a.fileInput,type:"file",name:"file",id:"file",ref:o,onChange:function(){s.onload=m,s.onerror=d,s.src=URL.createObjectURL(o.current.files[0])}}),c.a.createElement("canvas",{className:k.a.hidden,ref:u,width:"",height:""}));case"minimized":return c.a.createElement("div",{className:k.a.minimized,onClick:function(){return r("image")}},c.a.createElement("h3",null,"Image Upload"));default:return null}};function C(e,t){var n,a=arguments,c=this;return function(){clearTimeout(n),n=setTimeout((function(){n=null,e.apply(c,a)}),t)}}var N=n(27),x=n.n(N),L=function(){var e=Object(a.useContext)(w),t=e.customSpecUIState,n=e.dispatch;switch(t.scale){case"active":return c.a.createElement(z,null);case"minimized":return c.a.createElement("div",{className:x.a.minimized,onClick:function(){return n("scale")}},c.a.createElement("h3",null,"Scale"));default:return null}},z=function(){var e,t=Object(a.useState)(window.innerWidth),n=Object(o.a)(t,2),i=n[0],r=n[1],u=Object(a.useState)([]),s=Object(o.a)(u,2),m=s[0],d=s[1],h=Object(a.useState)(null),p=Object(o.a)(h,2),f=p[0],g=p[1],b=Object(a.useContext)(w),E=b.setCustomSpecState,v=b.customSpecState,S=b.dispatch,_=Object(a.useRef)(),I=Object(a.useRef)(),j=Object(a.useRef)(),O=C((function(){return r(window.innerWidth)}),50);Object(a.useEffect)((function(){return window.addEventListener("resize",O),function(){window.removeEventListener("resize",O)}}),[]);Object(a.useEffect)((function(){!function(){var t=new Image;t.onload=function(){f||g({imageHeight:t.height,imageWidth:t.width});var n=j.current.clientWidth/t.width;_.current.width=t.width*n,_.current.height=t.height*n,(e=_.current.getContext("2d")).drawImage(t,0,0,_.current.width,_.current.height),k()},t.src=v.image}()}),[i,m]);var k=function(){m.forEach((function(e){y(e[0]*(_.current.width/f.imageWidth),e[1]*(_.current.height/f.imageHeight))}))},y=function(t,n){(e=_.current.getContext("2d")).strokeStyle="#FF0000",e.lineWidth=3,e.beginPath(),e.arc(t,n,10,0,2*Math.PI),e.stroke()};return c.a.createElement("div",{className:x.a.scaleInput,ref:j},c.a.createElement("h3",null,"Scale"),c.a.createElement("form",{onSubmit:function(e){return function(e){if(e.preventDefault(),2===m.length){var t=Math.hypot(m[0][0]-m[1][0],m[0][1]-m[1][1])/I.value;E(Object(l.a)({},v,{scale:t})),S("shape")}}(e)},className:x.a.scaleInputForm},c.a.createElement("input",{ref:function(e){I=e},placeholder:"Top Tube Length in inches",type:"number"}),c.a.createElement("button",{className:x.a.button,type:"submit"},"Submit"),c.a.createElement("button",{className:x.a.button,onClick:function(){return d([])}},"Reset")),c.a.createElement("canvas",{ref:_,width:"0",height:"0",onClick:function(e){var t=j.current.clientWidth/f.imageWidth;if(m.length<2){var n=_.current.getBoundingClientRect(),a=(e.clientX-n.left)/t,c=(e.clientY-n.top)/t;1===m.length?d([m[0],[a,c]]):d([[a,c]])}}}))},M=n(18),R=n(28),q=n.n(R),U=function(){var e=Object(a.useContext)(w),t=e.customSpecUIState,n=e.dispatch;switch(t.shape){case"active":return c.a.createElement(W,null);case"minimized":return c.a.createElement("div",{className:q.a.shapeInput,onClick:function(){return n("shape")}},c.a.createElement("h3",null,"Shape"));default:return null}},W=function(){var e,t=Object(a.useContext)(w),n=t.customSpecState,i=t.setCustomSpecState,r=t.dispatch,u=Object(a.useState)([]),s=Object(o.a)(u,2),m=s[0],d=s[1],h=Object(a.useState)(null),p=Object(o.a)(h,2),f=p[0],g=p[1],b=Object(a.useState)(),E=Object(o.a)(b,2),v=E[0],S=E[1],_=Object(a.useRef)(),I=Object(a.useRef)();Object(a.useEffect)((function(){return window.addEventListener("resize",j),function(){window.removeEventListener("resize",j)}}),[]);var j=C((function(){return S(window.innerWidth)}),50);Object(a.useEffect)((function(){O()}),[v,m]);var O=function(){var t=new Image;t.onload=function(){f||g({imageHeight:t.height,imageWidth:t.width}),_.current.width=I.current.clientWidth,e=_.current.width/t.width,_.current.height=e*t.height,_.current.getContext("2d").drawImage(t,0,0,_.current.width,_.current.height),k(),N()},t.src=n.image},k=function(){m.forEach((function(t){y(t[0]*e,t[1]*e)}))},y=function(e,t){var n=_.current.getContext("2d");n.strokeStyle="#FF0000",n.lineWidth=3,n.beginPath(),n.arc(e,t,10,0,2*Math.PI),n.stroke()},N=function(){for(var t=0;t<m.length-1;t++){var n=_.current.getContext("2d");n.strokeStyle="#FF0000",n.lineWidth=3,n.moveTo(m[t][0]*e,m[t][1]*e),n.lineTo(m[t+1][0]*e,m[t+1][1]*e),n.stroke()}};return c.a.createElement("div",{className:q.a.shapeInput,ref:I},c.a.createElement("h3",null,"Shape"),c.a.createElement("div",{className:q.a.buttonRow},c.a.createElement("button",{className:q.a.button,onClick:function(){i(Object(l.a)({},n,{shape:m})),r("confirmation")}},"Submit Shape"),c.a.createElement("button",{className:q.a.button,onClick:function(){d([])}},"Reset Shape")),c.a.createElement("canvas",{ref:_,width:"0",height:"0",onClick:function(t){for(var n=_.current.getBoundingClientRect(),a=t.clientX-n.left,c=t.clientY-n.top,i=a*f.imageWidth/_.current.width,r=c*f.imageHeight/_.current.height,o=0;o<m.length;o++){if(Math.hypot(m[o][0]*e-i*e,m[o][1]*e-r*e)<10)return void d([].concat(Object(M.a)(m),[[m[o][0],m[o][1]]]))}d([].concat(Object(M.a)(m),[[i,r]]))}}))};n(98);var F=n(99),T=n.n(F),A=function(){return c.a.createElement("div",{className:T.a.customSpec},c.a.createElement(j,null),c.a.createElement(y,null),c.a.createElement(L,null),c.a.createElement(U,null))},B={image:null,scale:null,shape:null,download:null},H={style:"",image:null,scale:null,shape:null},P=function(e,t){switch(t){case"image":return Object(l.a)({},e,{image:"active",scale:null===e.scale?null:"minimized",shape:null===e.shape?null:"minimized",confirmation:null==e.confirmation?null:"minimized"});case"scale":return Object(l.a)({},e,{scale:"active",image:"minimized",shape:null==e.shape?null:"minimized",confirmation:null==e.confirmation?null:"minimized"});case"shape":return Object(l.a)({},e,{shape:"active",image:"minimized",scale:"minimized",confirmation:null==e.confirmation?null:"minimized"});case"confirmation":return Object(l.a)({},e,{shape:"minimized",scale:"minimized",image:"minimized"});default:throw new Error}},D=function(){var e=Object(a.useState)("home"),t=Object(o.a)(e,2),n={activeMainComponent:t[0],setActiveMainComponent:t[1]},i=Object(a.useState)(H),r=Object(o.a)(i,2),l=r[0],s=r[1],m=Object(a.useReducer)(P,B),d=Object(o.a)(m,2),h=d[0],f=d[1],E={customSpecState:l,setCustomSpecState:s,customSpecUIState:h,dispatch:f};Object(a.useEffect)((function(){console.log(l)}),[l]);return c.a.createElement(u.Provider,{value:n},c.a.createElement(w.Provider,{value:E},c.a.createElement(p,null),function(){switch(n.activeMainComponent){case"home":return c.a.createElement(g,null);case"customSpec":return c.a.createElement(A,null);case"account":return c.a.createElement(b,null);default:console.log("default")}}()))};n(500);r.a.render(c.a.createElement(D,null),document.getElementById("root"))},99:function(e,t,n){e.exports={customSpec:"CustomSpec_customSpec__3zSeu"}}},[[102,1,2]]]);
//# sourceMappingURL=main.151545e8.chunk.js.map