(this["webpackJsonpcanvas-test"]=this["webpackJsonpcanvas-test"]||[]).push([[0],{132:function(e,t,n){e.exports=n(542)},21:function(e,t,n){e.exports={home:"Home_home__2Zh7y",iconDescContainer:"Home_iconDescContainer__lwb9z",row:"Home_row__3uUUw",bigScreenReverseRow:"Home_bigScreenReverseRow__2LpWW",icon:"Home_icon__1RNnw",text:"Home_text__yLEED"}},28:function(e,t,n){e.exports={bagIcon:"StyleSelection_bagIcon__gjqEV",styleContainer:"StyleSelection_styleContainer__2rKvy",styleItem:"StyleSelection_styleItem__HH9RA",styleItemActive:"StyleSelection_styleItemActive__3VPpx"}},38:function(e,t,n){e.exports={imageUpload:"ImageUpload_imageUpload__2kyVe",button:"ImageUpload_button__2ZvqF",fileInput:"ImageUpload_fileInput__32kdw",hidden:"ImageUpload_hidden__3cEGb",minimized:"ImageUpload_minimized__1kd-9"}},39:function(e,t,n){e.exports={scaleInputForm:"ScaleInput_scaleInputForm__3GYfS",scaleInput:"ScaleInput_scaleInput__3lksu",button:"ScaleInput_button__26wym",minimized:"ScaleInput_minimized__1IaZN"}},40:function(e,t,n){e.exports={shapeInput:"ShapeInput_shapeInput__34sbM",buttonRow:"ShapeInput_buttonRow__1DTqS",button:"ShapeInput_button__vHN-I",minimized:"ShapeInput_minimized__3sG6i"}},41:function(e,t,n){e.exports={customSpecContainer:"CustomSpec_customSpecContainer__12VYb",customSpecContents:"CustomSpec_customSpecContents__1OPUK"}},47:function(e,t,n){e.exports={header:"Header_header__3diqq",headerContent:"Header_headerContent__1skw-",headerTitle:"Header_headerTitle__2ZMQM",links:"Header_links__KrrUu"}},540:function(e,t,n){},542:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),i=n(115),r=n.n(i),o=n(10),s=n(13),l={image:null,scale:null,shape:null,download:null},u=function(e,t){switch(t){case"image":return Object(s.a)(Object(s.a)({},e),{},{image:"active",scale:null===e.scale?null:"minimized",shape:null===e.shape?null:"minimized"});case"scale":return Object(s.a)(Object(s.a)({},e),{},{scale:"active",image:"minimized",shape:null==e.shape?null:"minimized"});case"shape":return Object(s.a)(Object(s.a)({},e),{},{shape:"active",image:"minimized",scale:"minimized"});case"clear":return{image:null,scale:null,shape:null,download:null};default:throw new Error("invalid custom spec phase")}};var m=Object(a.createContext)("home"),d=Object(a.createContext)(null),h=Object(a.createContext)(null),p=n(47),f=n.n(p),g=n(15);function b(){var e=Object(a.useContext)(m).setActiveMainComponent;return c.a.createElement("div",{className:f.a.header},c.a.createElement("div",{className:f.a.headerContent},c.a.createElement("h1",{className:f.a.headerTitle},"Bike Frame Bag Designer"),c.a.createElement("div",{className:f.a.links},c.a.createElement(v,null),c.a.createElement("h3",{onClick:function(){return e("customSpec")}}," Custom "),c.a.createElement("h3",{onClick:function(){return e("home")}}," Home "))))}var v=function(){var e=Object(a.useContext)(m).setActiveMainComponent;return Object(a.useContext)(h).user?c.a.createElement("h3",{onClick:function(){return e("account")}}," Account "):c.a.createElement("h3",{onClick:function(){return g.b.federatedSignIn()}}," Sign In ")},E=n(21),_=n.n(E),w=n(123),S=n.n(w),j=n(125),O=n.n(j),C=n(126),k=n.n(C),y=n(127),I=n.n(y),x=function(){var e=Object(a.useContext)(m).setActiveMainComponent;return c.a.createElement("div",{className:_.a.home},c.a.createElement("h1",null,"How it works"),c.a.createElement("div",{className:_.a.iconDescContainer},c.a.createElement("div",{className:_.a.bigScreenReverseRow},c.a.createElement("div",{className:_.a.icon},c.a.createElement(S.a,{fontSize:"inherit",color:"inherit"})),c.a.createElement("div",{className:_.a.text},c.a.createElement("p",null,"1. Upload an image of your bike"))),c.a.createElement("div",{className:_.a.row},c.a.createElement("div",{className:_.a.icon},c.a.createElement(O.a,{fontSize:"inherit",color:"inherit"})),c.a.createElement("div",{className:_.a.text},c.a.createElement("p",null,"2. Measure your bike to establish the scale"))),c.a.createElement("div",{className:_.a.bigScreenReverseRow},c.a.createElement("div",{className:_.a.icon},c.a.createElement(k.a,{fontSize:"inherit",color:"inherit"})),c.a.createElement("div",{className:_.a.text},c.a.createElement("p",null,"3. Outline your desired shape"))),c.a.createElement("div",{className:_.a.row},c.a.createElement("div",{className:_.a.icon},c.a.createElement(I.a,{fontSize:"inherit",color:"inherit"})),c.a.createElement("div",{className:_.a.text},c.a.createElement("p",null,"4. Submit your design and receive your custom bike frame bag")))),c.a.createElement("button",{className:"button",onClick:function(){return e("customSpec")}}," create custom bag"))},N=function(e){return c.a.createElement("svg",Object.assign({width:644.091,height:341.511},e,{viewBox:"0 0 644 342"}),c.a.createElement("path",{d:"M207.937 66.749l305.069-59.25 15.127 52.947L274.75 333.999z",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("rect",{width:52.764,height:118.582,x:369.241,y:-221.188,transform:"matrix(.6959 .71813 -.67781 .73523 0 0)",ry:22.455,opacity:.97,fill:"#0000b2"}),c.a.createElement("rect",{width:52.764,height:118.582,x:194.913,y:207.595,transform:"matrix(.98364 -.18014 .23523 .97194 0 0)",ry:18.571,opacity:.97,fill:"#0000b2"}),c.a.createElement("path",{d:"M207.937 66.749L10.021 264.665 7.5 303.744l267.25 30.255M528.133 60.446L636.546 297.44",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M216.762 72.737l15.127 58.618 247.08-27.733L520.254 59.5 508.28 15.38z",fill:"#92ba40"}))},z=function(e){return c.a.createElement("svg",Object.assign({width:644.091,height:341.511},e,{viewBox:"0 0 644 342"}),c.a.createElement("path",{d:"M207.937 66.749l305.069-59.25 15.127 52.947L274.75 333.999z",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M207.937 66.749L10.021 264.665 7.5 303.744l267.25 30.255M528.133 60.446L636.546 297.44",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M216.577 72.183l48.308 193.333h63.381L520.7 60.837l-12.644-44.79z",fill:"#92ba40"}))},L=function(e){return c.a.createElement("svg",Object.assign({width:644.091,height:341.511},e,{viewBox:"0 0 644 342"}),c.a.createElement("path",{d:"M207.937 66.749l305.069-59.25 15.127 52.947L274.75 333.999z",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("rect",{width:52.764,height:118.582,x:194.913,y:207.595,transform:"matrix(.98364 -.18014 .23523 .97194 0 0)",ry:18.571,opacity:.97,fill:"#0000b2"}),c.a.createElement("path",{d:"M207.937 66.749L10.021 264.665 7.5 303.744l267.25 30.255M528.133 60.446L636.546 297.44",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M269.523 62.098l51.275 211.962L479.415 104.96 520.7 60.837l-12.644-44.79z",fill:"#92ba40"}))},R=n(28),T=n.n(R),M=function(){var e=Object(a.useContext)(d),t=e.customSpecState,n=e.setCustomSpecState,i=e.setActiveCustomSpecPhase,r=function(e){n(Object(s.a)(Object(s.a)({},t),{},{style:e})),i("image")};return c.a.createElement("div",{className:T.a.styleContainer},c.a.createElement("div",{className:"topTube"===t.style?T.a.styleItemActive:T.a.styleItem,onClick:function(){return r("topTube")}},c.a.createElement("h4",null,"Top Tube"),c.a.createElement(N,{className:T.a.bagIcon})),c.a.createElement("div",{className:"front"===t.style?T.a.styleItemActive:T.a.styleItem,onClick:function(){return r("front")}},c.a.createElement("h4",null,"Front"),c.a.createElement(L,{className:T.a.bagIcon})),c.a.createElement("div",{className:"full"===t.style?T.a.styleItemActive:T.a.styleItem,onClick:function(){return r("full")}},c.a.createElement("h4",null,"Full"),c.a.createElement(z,{className:T.a.bagIcon})))},A=n(38),U=n.n(A);function P(){var e=Object(a.useContext)(d),t=e.customSpecUIState,n=e.setActiveCustomSpecPhase;switch(t.image){case"active":return c.a.createElement(H,null);case"minimized":return c.a.createElement("div",{className:U.a.minimized,onClick:function(){return n("image")}},c.a.createElement("h3",null,"Image Upload"));default:return null}}var H=function(){var e=Object(a.useContext)(d),t=e.setCustomSpecState,n=e.customSpecState,i=e.setActiveCustomSpecPhase,r=Object(a.useRef)(),o=Object(a.useRef)(),l=Object(a.useRef)();Object(a.useEffect)((function(){setTimeout((function(){window.scroll({top:r.current.offsetTop,behavior:"smooth"})}),0)}),[]);var u=new Image,m=function(){console.error("The provided file couldn't be loaded as an Image media")};return c.a.createElement("div",{className:U.a.imageUpload,ref:r},c.a.createElement("h3",null,"Image Upload"),c.a.createElement("label",{className:U.a.button,htmlFor:"file"},c.a.createElement("p",null,"Upload Photo")),c.a.createElement("input",{className:U.a.fileInput,type:"file",name:"file",id:"file",ref:o,onChange:function(){u.onload=function(){console.log(u),t(Object(s.a)(Object(s.a)({},n),{},{image:u,imageRaw:o.current.files[0]})),i("scale")},u.onerror=m,u.src=URL.createObjectURL(o.current.files[0])}}),c.a.createElement("canvas",{className:U.a.hidden,ref:l,width:"",height:""}))};function W(e,t){var n,a=arguments,c=this;return function(){clearTimeout(n),n=setTimeout((function(){n=null,e.apply(c,a)}),t)}}function D(e,t,n){var a=e.current.getContext("2d");a.strokeStyle="#FF0000",a.lineWidth=3,t.forEach((function(e){a.beginPath(),a.arc(e[0]*n,e[1]*n,10,0,2*Math.PI),a.stroke()}))}function F(e,t,n){for(var a=0;a<t.length-1;a++){var c=e.current.getContext("2d");c.strokeStyle="#FF0000",c.lineWidth=3,c.moveTo(t[a][0]*n,t[a][1]*n),c.lineTo(t[a+1][0]*n,t[a+1][1]*n),c.stroke()}}function B(e){var t=Object(a.useState)(window.innerWidth),n=Object(o.a)(t,2),c=n[0],i=n[1];return Object(a.useEffect)((function(){return window.addEventListener("resize",W((function(){return i(window.innerWidth)}),e)),function(){window.removeEventListener("resize",W((function(){return i(window.innerWidth)}),e))}}),[]),[c]}var q=n(39),$=n.n(q);function G(){var e=Object(a.useContext)(d),t=e.customSpecUIState,n=e.setActiveCustomSpecPhase;switch(t.scale){case"active":return c.a.createElement(Y,null);case"minimized":return c.a.createElement("div",{className:$.a.minimized,onClick:function(){return n("scale")}},c.a.createElement("h3",null,"Scale"));default:return null}}var Y=function(){var e=B(50),t=Object(o.a)(e,1)[0],n=Object(a.useState)([]),i=Object(o.a)(n,2),r=i[0],l=i[1],u=Object(a.useState)(null),m=Object(o.a)(u,2),h=m[0],p=m[1],f=Object(a.useContext)(d),g=f.setCustomSpecState,b=f.customSpecState,v=f.setActiveCustomSpecPhase,E=Object(a.useRef)(),_=Object(a.useRef)(),w=Object(a.useRef)();Object(a.useEffect)((function(){setTimeout((function(){window.scroll({top:w.current.offsetTop,behavior:"smooth"})}),0)}),[]);Object(a.useEffect)((function(){!function(){h||p({imageHeight:b.image.height,imageWidth:b.image.width});var e=w.current.clientWidth/b.image.width;E.current.width=b.image.width*e,E.current.height=b.image.height*e,E.current.getContext("2d").drawImage(b.image,0,0,E.current.width,E.current.height),D(E,r,e),F(E,r,e)}()}),[t,r]);return c.a.createElement("div",{className:$.a.scaleInput,ref:w,style:{minHeight:"50vh"}},c.a.createElement("h3",null,"Scale"),c.a.createElement("form",{onSubmit:function(e){return function(e){if(e.preventDefault(),2===r.length){var t=Math.hypot(r[0][0]-r[1][0],r[0][1]-r[1][1])/_.value;g(Object(s.a)(Object(s.a)({},b),{},{scale:t})),v("shape")}}(e)},className:$.a.scaleInputForm},c.a.createElement("input",{ref:function(e){_=e},placeholder:"Top Tube Length in inches",type:"number"}),c.a.createElement("button",{className:$.a.button,type:"submit"},"Submit"),c.a.createElement("button",{className:$.a.button,onClick:function(){return l([])}},"Reset")),c.a.createElement("canvas",{ref:E,width:"0",height:"0",onClick:function(e){var t=w.current.clientWidth/h.imageWidth;if(r.length<2){var n=E.current.getBoundingClientRect(),a=(e.clientX-n.left)/t,c=(e.clientY-n.top)/t;1===r.length?l([r[0],[a,c]]):l([[a,c]])}}}))},Z=n(75),V=n(24),K=n.n(V),J=n(33),X=n(40),Q=n.n(X),ee=n(11),te={aws_project_region:"us-west-2",aws_cognito_identity_pool_id:"us-west-2:2e9df26a-d6c8-42fc-a831-7b5147f61f03",aws_cognito_region:"us-west-2",aws_user_pools_id:"us-west-2_r9UEzv4CF",aws_user_pools_web_client_id:"53m4886fjnpcrgmeherl87h1s7",oauth:{domain:"bikebagproject2a90f4437-a90f4437-dev.auth.us-west-2.amazoncognito.com",scope:["phone","email","openid","profile","aws.cognito.signin.user.admin"],redirectSignIn:"https://ethanse.github.io/bikeBagProject2/,https://ethanse.github.io/bikeBagProject2/",redirectSignOut:"https://ethanse.github.io/bikeBagProject2/",responseType:"code"},federationTarget:"COGNITO_USER_POOLS",aws_appsync_graphqlEndpoint:"https://yehmb4zegba2hieeir45ha6oze.appsync-api.us-west-2.amazonaws.com/graphql",aws_appsync_region:"us-west-2",aws_appsync_authenticationType:"AMAZON_COGNITO_USER_POOLS",aws_user_files_s3_bucket:"bikebagimagebucket11541-dev",aws_user_files_s3_bucket_region:"us-west-2"},ne=te.aws_user_files_s3_bucket_region,ae=te.aws_user_files_s3_bucket;function ce(){var e=Object(a.useContext)(d),t=e.customSpecUIState,n=e.setActiveCustomSpecPhase;switch(t.shape){case"active":return c.a.createElement(ie,null);case"minimized":return c.a.createElement("div",{className:Q.a.minimized,onClick:function(){return n("shape")}},c.a.createElement("h3",null,"Shape"));default:return null}}var ie=function(){var e,t=Object(a.useContext)(m).setActiveMainComponent,n=B(50),i=Object(o.a)(n,1)[0],r=Object(a.useContext)(d),l=r.customSpecState,u=(r.setCustomSpecState,r.setActiveCustomSpecPhase),p=Object(a.useState)([]),f=Object(o.a)(p,2),b=f[0],v=f[1],E=Object(a.useState)(null),_=Object(o.a)(E,2),w=_[0],S=_[1],j=Object(a.useContext)(h).user,O=Object(a.useRef)(),C=Object(a.useRef)();Object(a.useEffect)((function(){k()}),[i,b]),Object(a.useEffect)((function(){setTimeout((function(){window.scroll({top:C.current.offsetTop,behavior:"smooth"})}),0)}),[]);var k=function(){w||S({imageHeight:l.image.height,imageWidth:l.image.width}),O.current.width=C.current.clientWidth,e=O.current.width/l.image.width,O.current.height=e*l.image.height,O.current.getContext("2d").drawImage(l.image,0,0,O.current.width,O.current.height),D(O,b,e),F(O,b,e)},y=function(){var e=Object(J.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(Object(s.a)(Object(s.a)({},l),{},{shape:b}));case 2:u("clear"),t("account");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(J.a)(K.a.mark((function e(t){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.d.put("".concat(Object(ee.v4)()),l.imageRaw,{contentType:"image/png"}).then((function(e){console.log("successfully saved file!",e),n(e)})).catch((function(e){return console.log("issue with image upload!",e)})),n=function(){var e=Object(J.a)(K.a.mark((function e(n){var a,c;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:"".concat(Object(ee.v4)()),owner:j.attributes.sub,image:{bucket:ae,region:ne,key:n.key},scale:l.scale,points:t.shape.toString()},console.log("newBag",a),e.next=4,g.a.graphql(Object(g.f)("\n  mutation CreateCustomDesign(\n    $input: CreateCustomDesignInput!\n    $condition: ModelCustomDesignConditionInput\n  ) {\n    createCustomDesign(input: $input, condition: $condition) {\n      id\n      owner\n      image {\n        bucket\n        region\n        key\n      }\n      scale\n      points\n      createdAt\n      updatedAt\n    }\n  }\n",{input:a}));case 4:c=e.sent,console.log(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:Q.a.shapeInput,ref:C,style:{minHeight:"50vh"}},c.a.createElement("h3",null,"Shape"),c.a.createElement("div",{className:Q.a.buttonRow},c.a.createElement("button",{className:Q.a.button,onClick:y},"Submit Design"),c.a.createElement("button",{className:Q.a.button,onClick:function(){return v([])}},"Reset Shape")),c.a.createElement("canvas",{ref:O,width:"0",height:"0",onClick:function(t){for(var n=O.current.getBoundingClientRect(),a=t.clientX-n.left,c=t.clientY-n.top,i=a*w.imageWidth/O.current.width,r=c*w.imageHeight/O.current.height,o=0;o<b.length;o++){if(Math.hypot(b[o][0]*e-i*e,b[o][1]*e-r*e)<10)return void v([].concat(Object(Z.a)(b),[[b[o][0],b[o][1]]]))}v([].concat(Object(Z.a)(b),[[i,r]]))}}))},re=n(41),oe=n.n(re);function se(){return Object(a.useContext)(h).user?c.a.createElement("div",{className:oe.a.customSpecContainer},c.a.createElement("div",{className:oe.a.customSpecContents},c.a.createElement(M,null),c.a.createElement(P,null),c.a.createElement(G,null),c.a.createElement(ce,null))):c.a.createElement(le,null)}var le=function(){return c.a.createElement("div",{className:oe.a.customSpecContainer},c.a.createElement("div",{className:oe.a.customSpecContents},c.a.createElement("h1",null,"Sign in to create a custom bag"),c.a.createElement("button",{className:oe.a.signInButton,onClick:function(){return g.b.federatedSignIn()}}," Sign In ")))};function ue(){var e=Object(a.useContext)(h).user,t=Object(a.useState)([]),n=Object(o.a)(t,2),i=n[0],r=n[1];Object(a.useEffect)((function(){s()}),[]);var s=function(){var t=Object(J.a)(K.a.mark((function t(){var n;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,g.a.graphql(Object(g.f)("\n  query ListCustomDesigns(\n    $filter: ModelCustomDesignFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listCustomDesigns(filter: $filter, limit: $limit, nextToken: $nextToken) {\n      items {\n        id\n        owner\n        image {\n          bucket\n          region\n          key\n        }\n        scale\n        points\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n",{filter:{owner:{eq:e.attributes.sub}}}));case 3:n=t.sent,console.log(n),r(n.data.listCustomDesigns.items);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return c.a.createElement("div",null,c.a.createElement("h1",null,"Your saved designs"),c.a.createElement(me,{designs:i}))}var me=function(e){var t=e.designs.map((function(e){return c.a.createElement("li",null,c.a.createElement(de,{design:e,key:e.id}))}));return c.a.createElement("ul",null,t)},de=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){g.d.get(e.design.image.key).then((function(e){return r(e)})).catch((function(e){return console.log("error fetching image",e)}))}),[]),c.a.createElement("div",null,c.a.createElement("p",null,"this is a design. id = $",e.design.id),c.a.createElement("img",{src:i}))};function he(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)("home"),s=Object(o.a)(r,2),p=s[0],f=s[1],v=Object(a.useState)({style:"",image:null,scale:null,shape:null}),E=Object(o.a)(v,2),_=E[0],w=E[1];Object(a.useEffect)((function(){g.c.listen("auth",(function(e){var t=e.payload,n=t.event;t.data;"signOut"===n?(i(null),f("home")):"signIn"===n&&g.b.currentAuthenticatedUser().then((function(e){return i(e)}))}))}));var S=function(){var e=Object(a.useReducer)(u,l),t=Object(o.a)(e,2),n=t[0],c=t[1];return[n,function(e){c(e)}]}(),j=Object(o.a)(S,2),O={customSpecState:_,setCustomSpecState:w,customSpecUIState:j[0],setActiveCustomSpecPhase:j[1]};return c.a.createElement(h.Provider,{value:{user:n,setUser:i}},c.a.createElement(m.Provider,{value:{activeMainComponent:p,setActiveMainComponent:f}},c.a.createElement(d.Provider,{value:O},c.a.createElement(b,null),c.a.createElement(pe,null))))}g.e.configure(te);var pe=function(){switch(Object(a.useContext)(m).activeMainComponent){case"home":return c.a.createElement(x,null);case"customSpec":return c.a.createElement(se,null);case"account":return c.a.createElement(ue,null);default:console.log("default")}};n(540);r.a.render(c.a.createElement(he,null),document.getElementById("root"))},62:function(e,t){}},[[132,1,2]]]);
//# sourceMappingURL=main.be82c065.chunk.js.map