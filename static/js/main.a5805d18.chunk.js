(this["webpackJsonpcanvas-test"]=this["webpackJsonpcanvas-test"]||[]).push([[0],{131:function(e,t,n){e.exports=n(541)},20:function(e,t,n){e.exports={home:"Home_home__2Zh7y",iconDescContainer:"Home_iconDescContainer__lwb9z",row:"Home_row__3uUUw",bigScreenReverseRow:"Home_bigScreenReverseRow__2LpWW",icon:"Home_icon__1RNnw",text:"Home_text__yLEED"}},26:function(e,t,n){e.exports={bagIcon:"StyleSelection_bagIcon__gjqEV",styleContainer:"StyleSelection_styleContainer__2rKvy",styleItem:"StyleSelection_styleItem__HH9RA",styleItemActive:"StyleSelection_styleItemActive__3VPpx"}},36:function(e,t,n){e.exports={imageUpload:"ImageUpload_imageUpload__2kyVe",button:"ImageUpload_button__2ZvqF",fileInput:"ImageUpload_fileInput__32kdw",hidden:"ImageUpload_hidden__3cEGb",minimized:"ImageUpload_minimized__1kd-9"}},37:function(e,t,n){e.exports={scaleInputForm:"ScaleInput_scaleInputForm__3GYfS",scaleInput:"ScaleInput_scaleInput__3lksu",button:"ScaleInput_button__26wym",minimized:"ScaleInput_minimized__1IaZN"}},38:function(e,t,n){e.exports={shapeInput:"ShapeInput_shapeInput__34sbM",buttonRow:"ShapeInput_buttonRow__1DTqS",button:"ShapeInput_button__vHN-I",minimized:"ShapeInput_minimized__3sG6i"}},39:function(e,t,n){e.exports={customSpecContainer:"CustomSpec_customSpecContainer__12VYb",customSpecContents:"CustomSpec_customSpecContents__1OPUK"}},45:function(e,t,n){e.exports={header:"Header_header__3diqq",headerContent:"Header_headerContent__1skw-",headerTitle:"Header_headerTitle__2ZMQM",links:"Header_links__KrrUu"}},539:function(e,t,n){},541:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),i=n(114),r=n.n(i),o=n(14),l=n(11),u={image:null,scale:null,shape:null,download:null},s=function(e,t){switch(t){case"image":return Object(l.a)(Object(l.a)({},e),{},{image:"active",scale:null===e.scale?null:"minimized",shape:null===e.shape?null:"minimized"});case"scale":return Object(l.a)(Object(l.a)({},e),{},{scale:"active",image:"minimized",shape:null==e.shape?null:"minimized"});case"shape":return Object(l.a)(Object(l.a)({},e),{},{shape:"active",image:"minimized",scale:"minimized"});case"clear":return{image:null,scale:null,shape:null,download:null};default:throw new Error("invalid custom spec phase")}};var m=Object(a.createContext)("home"),h=Object(a.createContext)(null),d=Object(a.createContext)(null),f=n(45),p=n.n(f),b=n(29);function v(){var e=Object(a.useContext)(m).setActiveMainComponent;return c.a.createElement("div",{className:p.a.header},c.a.createElement("div",{className:p.a.headerContent},c.a.createElement("h1",{className:p.a.headerTitle},"Bike Frame Bag Designer"),c.a.createElement("div",{className:p.a.links},c.a.createElement(g,null),c.a.createElement("h3",{onClick:function(){return e("customSpec")}}," Custom "),c.a.createElement("h3",{onClick:function(){return e("home")}}," Home "))))}var g=function(){var e=Object(a.useContext)(m).setActiveMainComponent;return Object(a.useContext)(d).user?c.a.createElement("h3",{onClick:function(){return e("account")}}," Account "):c.a.createElement("h3",{onClick:function(){return b.a.federatedSignIn()}}," Sign In ")},E=n(20),_=n.n(E),S=n(122),w=n.n(S),j=n(124),C=n.n(j),O=n(125),k=n.n(O),I=n(126),y=n.n(I),N=function(){var e=Object(a.useContext)(m).setActiveMainComponent;return c.a.createElement("div",{className:_.a.home},c.a.createElement("h1",null,"How it works"),c.a.createElement("div",{className:_.a.iconDescContainer},c.a.createElement("div",{className:_.a.bigScreenReverseRow},c.a.createElement("div",{className:_.a.icon},c.a.createElement(w.a,{fontSize:"inherit",color:"inherit"})),c.a.createElement("div",{className:_.a.text},c.a.createElement("p",null,"1. Upload an image of your bike"))),c.a.createElement("div",{className:_.a.row},c.a.createElement("div",{className:_.a.icon},c.a.createElement(C.a,{fontSize:"inherit",color:"inherit"})),c.a.createElement("div",{className:_.a.text},c.a.createElement("p",null,"2. Measure your bike to establish the scale"))),c.a.createElement("div",{className:_.a.bigScreenReverseRow},c.a.createElement("div",{className:_.a.icon},c.a.createElement(k.a,{fontSize:"inherit",color:"inherit"})),c.a.createElement("div",{className:_.a.text},c.a.createElement("p",null,"3. Outline your desired shape"))),c.a.createElement("div",{className:_.a.row},c.a.createElement("div",{className:_.a.icon},c.a.createElement(y.a,{fontSize:"inherit",color:"inherit"})),c.a.createElement("div",{className:_.a.text},c.a.createElement("p",null,"4. Submit your design and receive your custom bike frame bag")))),c.a.createElement("button",{className:"button",onClick:function(){return e("customSpec")}}," create custom bag"))},x=function(e){return c.a.createElement("svg",Object.assign({width:644.091,height:341.511},e,{viewBox:"0 0 644 342"}),c.a.createElement("path",{d:"M207.937 66.749l305.069-59.25 15.127 52.947L274.75 333.999z",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("rect",{width:52.764,height:118.582,x:369.241,y:-221.188,transform:"matrix(.6959 .71813 -.67781 .73523 0 0)",ry:22.455,opacity:.97,fill:"#0000b2"}),c.a.createElement("rect",{width:52.764,height:118.582,x:194.913,y:207.595,transform:"matrix(.98364 -.18014 .23523 .97194 0 0)",ry:18.571,opacity:.97,fill:"#0000b2"}),c.a.createElement("path",{d:"M207.937 66.749L10.021 264.665 7.5 303.744l267.25 30.255M528.133 60.446L636.546 297.44",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M216.762 72.737l15.127 58.618 247.08-27.733L520.254 59.5 508.28 15.38z",fill:"#92ba40"}))},L=function(e){return c.a.createElement("svg",Object.assign({width:644.091,height:341.511},e,{viewBox:"0 0 644 342"}),c.a.createElement("path",{d:"M207.937 66.749l305.069-59.25 15.127 52.947L274.75 333.999z",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M207.937 66.749L10.021 264.665 7.5 303.744l267.25 30.255M528.133 60.446L636.546 297.44",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M216.577 72.183l48.308 193.333h63.381L520.7 60.837l-12.644-44.79z",fill:"#92ba40"}))},z=function(e){return c.a.createElement("svg",Object.assign({width:644.091,height:341.511},e,{viewBox:"0 0 644 342"}),c.a.createElement("path",{d:"M207.937 66.749l305.069-59.25 15.127 52.947L274.75 333.999z",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("rect",{width:52.764,height:118.582,x:194.913,y:207.595,transform:"matrix(.98364 -.18014 .23523 .97194 0 0)",ry:18.571,opacity:.97,fill:"#0000b2"}),c.a.createElement("path",{d:"M207.937 66.749L10.021 264.665 7.5 303.744l267.25 30.255M528.133 60.446L636.546 297.44",fill:"none",stroke:"#e08900",strokeWidth:15,strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{d:"M269.523 62.098l51.275 211.962L479.415 104.96 520.7 60.837l-12.644-44.79z",fill:"#92ba40"}))},R=n(26),M=n.n(R),U=function(){var e=Object(a.useContext)(h),t=e.customSpecState,n=e.setCustomSpecState,i=e.setActiveCustomSpecPhase,r=function(e){n(Object(l.a)(Object(l.a)({},t),{},{style:e})),i("image")};return c.a.createElement("div",{className:M.a.styleContainer},c.a.createElement("div",{className:"topTube"===t.style?M.a.styleItemActive:M.a.styleItem,onClick:function(){return r("topTube")}},c.a.createElement("h4",null,"Top Tube"),c.a.createElement(x,{className:M.a.bagIcon})),c.a.createElement("div",{className:"front"===t.style?M.a.styleItemActive:M.a.styleItem,onClick:function(){return r("front")}},c.a.createElement("h4",null,"Front"),c.a.createElement(z,{className:M.a.bagIcon})),c.a.createElement("div",{className:"full"===t.style?M.a.styleItemActive:M.a.styleItem,onClick:function(){return r("full")}},c.a.createElement("h4",null,"Full"),c.a.createElement(L,{className:M.a.bagIcon})))},T=n(36),P=n.n(T);function W(){var e=Object(a.useContext)(h),t=e.customSpecUIState,n=e.setActiveCustomSpecPhase;switch(t.image){case"active":return c.a.createElement(A,null);case"minimized":return c.a.createElement("div",{className:P.a.minimized,onClick:function(){return n("image")}},c.a.createElement("h3",null,"Image Upload"));default:return null}}var A=function(){var e=Object(a.useContext)(h),t=e.setCustomSpecState,n=e.customSpecState,i=e.setActiveCustomSpecPhase,r=Object(a.useRef)(),o=Object(a.useRef)(),u=Object(a.useRef)();Object(a.useEffect)((function(){setTimeout((function(){window.scroll({top:r.current.offsetTop,behavior:"smooth"})}),0)}),[]);var s=new Image,m=function(){var e=u.current.getContext("2d");u.current.width=s.width,u.current.height=s.height,e.drawImage(s,0,0);var a=u.current.toDataURL("image/png");t(Object(l.a)(Object(l.a)({},n),{},{image:a})),i("scale")},d=function(){console.error("The provided file couldn't be loaded as an Image media")};return c.a.createElement("div",{className:P.a.imageUpload,ref:r},c.a.createElement("h3",null,"Image Upload"),c.a.createElement("label",{className:P.a.button,htmlFor:"file"},c.a.createElement("p",null,"Upload Photo")),c.a.createElement("input",{className:P.a.fileInput,type:"file",name:"file",id:"file",ref:o,onChange:function(){s.onload=m,s.onerror=d,s.src=URL.createObjectURL(o.current.files[0])}}),c.a.createElement("canvas",{className:P.a.hidden,ref:u,width:"",height:""}))};function H(e,t){var n,a=arguments,c=this;return function(){clearTimeout(n),n=setTimeout((function(){n=null,e.apply(c,a)}),t)}}function F(e){var t=Object(a.useState)(window.innerWidth),n=Object(o.a)(t,2),c=n[0],i=n[1];return Object(a.useEffect)((function(){return window.addEventListener("resize",H((function(){return i(window.innerWidth)}),e)),function(){window.removeEventListener("resize",H((function(){return i(window.innerWidth)}),e))}}),[]),[c]}var B=n(37),D=n.n(B);function q(){var e=Object(a.useContext)(h),t=e.customSpecUIState,n=e.setActiveCustomSpecPhase;switch(t.scale){case"active":return c.a.createElement(V,null);case"minimized":return c.a.createElement("div",{className:D.a.minimized,onClick:function(){return n("scale")}},c.a.createElement("h3",null,"Scale"));default:return null}}var V=function(){var e,t=F(50),n=Object(o.a)(t,1)[0],i=Object(a.useState)([]),r=Object(o.a)(i,2),u=r[0],s=r[1],m=Object(a.useState)(null),d=Object(o.a)(m,2),f=d[0],p=d[1],b=Object(a.useContext)(h),v=b.setCustomSpecState,g=b.customSpecState,E=b.setActiveCustomSpecPhase,_=Object(a.useRef)(),S=Object(a.useRef)(),w=Object(a.useRef)();Object(a.useEffect)((function(){setTimeout((function(){window.scroll({top:w.current.offsetTop,behavior:"smooth"})}),0)}),[]);Object(a.useEffect)((function(){!function(){var t=new Image;t.onload=function(){f||p({imageHeight:t.height,imageWidth:t.width});var n=w.current.clientWidth/t.width;_.current.width=t.width*n,_.current.height=t.height*n,(e=_.current.getContext("2d")).drawImage(t,0,0,_.current.width,_.current.height),j()},t.src=g.image}()}),[n,u]);var j=function(){u.forEach((function(e){C(e[0]*(_.current.width/f.imageWidth),e[1]*(_.current.height/f.imageHeight))}))},C=function(t,n){(e=_.current.getContext("2d")).strokeStyle="#FF0000",e.lineWidth=3,e.beginPath(),e.arc(t,n,10,0,2*Math.PI),e.stroke()};return c.a.createElement("div",{className:D.a.scaleInput,ref:w,style:{minHeight:"50vh"}},c.a.createElement("h3",null,"Scale"),c.a.createElement("form",{onSubmit:function(e){return function(e){if(e.preventDefault(),2===u.length){var t=Math.hypot(u[0][0]-u[1][0],u[0][1]-u[1][1])/S.value;v(Object(l.a)(Object(l.a)({},g),{},{scale:t})),E("shape")}}(e)},className:D.a.scaleInputForm},c.a.createElement("input",{ref:function(e){S=e},placeholder:"Top Tube Length in inches",type:"number"}),c.a.createElement("button",{className:D.a.button,type:"submit"},"Submit"),c.a.createElement("button",{className:D.a.button,onClick:function(){return s([])}},"Reset")),c.a.createElement("canvas",{ref:_,width:"0",height:"0",onClick:function(e){var t=w.current.clientWidth/f.imageWidth;if(u.length<2){var n=_.current.getBoundingClientRect(),a=(e.clientX-n.left)/t,c=(e.clientY-n.top)/t;1===u.length?s([u[0],[a,c]]):s([[a,c]])}}}))},G=n(74),Y=n(38),Z=n.n(Y);function K(){var e=Object(a.useContext)(h),t=e.customSpecUIState,n=e.setActiveCustomSpecPhase;switch(t.shape){case"active":return c.a.createElement(J,null);case"minimized":return c.a.createElement("div",{className:Z.a.minimized,onClick:function(){return n("shape")}},c.a.createElement("h3",null,"Shape"));default:return null}}var J=function(){var e,t=Object(a.useContext)(m).setActiveMainComponent,n=F(50),i=Object(o.a)(n,1)[0],r=Object(a.useContext)(h),u=r.customSpecState,s=r.setCustomSpecState,d=r.setActiveCustomSpecPhase,f=Object(a.useState)([]),p=Object(o.a)(f,2),b=p[0],v=p[1],g=Object(a.useState)(null),E=Object(o.a)(g,2),_=E[0],S=E[1],w=Object(a.useRef)(),j=Object(a.useRef)();Object(a.useEffect)((function(){C()}),[i,b]),Object(a.useEffect)((function(){setTimeout((function(){window.scroll({top:j.current.offsetTop,behavior:"smooth"})}),0)}),[]);var C=function(){var t=new Image;t.onload=function(){_||S({imageHeight:t.height,imageWidth:t.width}),w.current.width=j.current.clientWidth,e=w.current.width/t.width,w.current.height=e*t.height,w.current.getContext("2d").drawImage(t,0,0,w.current.width,w.current.height),O(),I()},t.src=u.image},O=function(){b.forEach((function(t){k(t[0]*e,t[1]*e)}))},k=function(e,t){var n=w.current.getContext("2d");n.strokeStyle="#FF0000",n.lineWidth=3,n.beginPath(),n.arc(e,t,10,0,2*Math.PI),n.stroke()},I=function(){for(var t=0;t<b.length-1;t++){var n=w.current.getContext("2d");n.strokeStyle="#FF0000",n.lineWidth=3,n.moveTo(b[t][0]*e,b[t][1]*e),n.lineTo(b[t+1][0]*e,b[t+1][1]*e),n.stroke()}};return c.a.createElement("div",{className:Z.a.shapeInput,ref:j,style:{minHeight:"50vh"}},c.a.createElement("h3",null,"Shape"),c.a.createElement("div",{className:Z.a.buttonRow},c.a.createElement("button",{className:Z.a.button,onClick:function(){s(Object(l.a)(Object(l.a)({},u),{},{shape:b})),d("clear"),t("account")}},"Submit Design"),c.a.createElement("button",{className:Z.a.button,onClick:function(){v([])}},"Reset Shape")),c.a.createElement("canvas",{ref:w,width:"0",height:"0",onClick:function(t){for(var n=w.current.getBoundingClientRect(),a=t.clientX-n.left,c=t.clientY-n.top,i=a*_.imageWidth/w.current.width,r=c*_.imageHeight/w.current.height,o=0;o<b.length;o++){if(Math.hypot(b[o][0]*e-i*e,b[o][1]*e-r*e)<10)return void v([].concat(Object(G.a)(b),[[b[o][0],b[o][1]]]))}v([].concat(Object(G.a)(b),[[i,r]]))}}))},X=n(39),Q=n.n(X);function $(){return Object(a.useContext)(d).user?c.a.createElement("div",{className:Q.a.customSpecContainer},c.a.createElement("div",{className:Q.a.customSpecContents},c.a.createElement(U,null),c.a.createElement(W,null),c.a.createElement(q,null),c.a.createElement(K,null))):c.a.createElement(ee,null)}var ee=function(){return c.a.createElement("div",{className:Q.a.customSpecContainer},c.a.createElement("div",{className:Q.a.customSpecContents},c.a.createElement("h1",null,"Sign in to create a custom bag"),c.a.createElement("button",{className:Q.a.signInButton,onClick:function(){return b.a.federatedSignIn()}}," Sign In ")))};function te(){return null}var ne={aws_project_region:"us-west-2",aws_cognito_identity_pool_id:"us-west-2:a4efee23-4f3c-48bd-a106-c5a6ea4e5a6d",aws_cognito_region:"us-west-2",aws_user_pools_id:"us-west-2_tr6VflDF2",aws_user_pools_web_client_id:"29u6ikqdejik997f8evq8ldu43",oauth:{domain:"bike-bag-project2-new-production.auth.us-west-2.amazoncognito.com",scope:["phone","email","openid","profile","aws.cognito.signin.user.admin"],redirectSignIn:"https://ethanse.github.io/bikeBagProject2/",redirectSignOut:"https://ethanse.github.io/bikeBagProject2/,https://ethanse.github.io/bikeBagProject2/",responseType:"code"},federationTarget:"COGNITO_USER_POOLS"};function ae(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)("home"),l=Object(o.a)(r,2),f=l[0],p=l[1],g=Object(a.useState)({style:"",image:null,scale:null,shape:null}),E=Object(o.a)(g,2),_=E[0],S=E[1];Object(a.useEffect)((function(){b.b.listen("auth",(function(e){var t=e.payload,n=t.event;t.data;"signOut"===n?i(null):"signIn"===n&&b.a.currentAuthenticatedUser().then((function(e){return i(e)}))}))}));var w=function(){var e=Object(a.useReducer)(s,u),t=Object(o.a)(e,2),n=t[0],c=t[1];return[n,function(e){c(e)}]}(),j=Object(o.a)(w,2),C={customSpecState:_,setCustomSpecState:S,customSpecUIState:j[0],setActiveCustomSpecPhase:j[1]};return c.a.createElement(d.Provider,{value:{user:n,setUser:i}},c.a.createElement(m.Provider,{value:{activeMainComponent:f,setActiveMainComponent:p}},c.a.createElement(h.Provider,{value:C},c.a.createElement(v,null),c.a.createElement(ce,null))))}b.c.configure(ne);var ce=function(){switch(Object(a.useContext)(m).activeMainComponent){case"home":return c.a.createElement(N,null);case"customSpec":return c.a.createElement($,null);case"account":return c.a.createElement(te,null);default:console.log("default")}};n(539);r.a.render(c.a.createElement(ae,null),document.getElementById("root"))},60:function(e,t){}},[[131,1,2]]]);
//# sourceMappingURL=main.a5805d18.chunk.js.map